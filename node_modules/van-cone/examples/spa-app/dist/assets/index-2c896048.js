(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const Y="modulepreload",Z=function(t){return"/"+t},A={},b=function(e,r,a){if(!r||r.length===0)return e();const o=document.getElementsByTagName("link");return Promise.all(r.map(n=>{if(n=Z(n),n in A)return;A[n]=!0;const l=n.endsWith(".css"),i=l?'[rel="stylesheet"]':"";if(!!a)for(let u=o.length-1;u>=0;u--){const f=o[u];if(f.href===n&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${i}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":Y,l||(c.as="script",c.crossOrigin=""),c.href=n,document.head.appendChild(c),l)return new Promise((u,f)=>{c.addEventListener("load",u),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e()).catch(n=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=n,window.dispatchEvent(l),!l.defaultPrevented)throw n})};let R=Object,y,h=R.getPrototypeOf,L=document,V,p,v,q={isConnected:1},ee=1e3,w,U={},te=h(q),F=h(h),J=(t,e,r,a)=>(t??(setTimeout(r,a),new Set)).add(e),$=(t,e,r)=>{let a=p;p=e;try{return t(r)}catch(o){return console.error(o),r}finally{p=a}},C=t=>t.filter(e=>{var r;return(r=e._dom)==null?void 0:r.isConnected}),B=t=>w=J(w,t,()=>{for(let e of w)e._bindings=C(e._bindings),e._listeners=C(e._listeners);w=y},ee),O={get val(){return p==null||p.add(this),this._val},get oldVal(){return p==null||p.add(this),this._oldVal},set val(t){let e=this;if(t!==e._val){e._val=t;let r=[...e._listeners=C(e._listeners)];for(let a of r)G(a.f,a.s,a._dom),a._dom=y;e._bindings.length?V=J(V,e,ae):e._oldVal=t}}},M=t=>({__proto__:O,_val:t,_oldVal:t,_bindings:[],_listeners:[]}),W=t=>h(t??0)===O,ne=t=>W(t)?t.val:t,re=t=>W(t)?t.oldVal:t,S=(t,e)=>{let r=new Set,a={f:t},o=v;v=[];let n=$(t,r,e);n=(n??L).nodeType?n:new Text(n);for(let l of r)B(l),l._bindings.push(a);for(let l of v)l._dom=n;return v=o,a._dom=n},G=(t,e=M(),r)=>{let a=new Set,o={f:t,s:e};o._dom=r??(v==null?void 0:v.push(o))??q,e.val=$(t,a);for(let n of a)B(n),n._listeners.push(o);return e},H=(t,...e)=>{for(let r of e.flat(1/0)){let a=h(r??0),o=a===O?S(()=>r.val):a===F?S(r):r;o!=y&&t.append(o)}return t},oe=t=>(t._isBindingFunc=1,t),T=t=>new Proxy((e,...r)=>{var l;let[a,...o]=h(r[0]??0)===te?r:[{},...r],n=t?L.createElementNS(t,e):L.createElement(e);for(let[i,d]of R.entries(a)){let c=m=>m?R.getOwnPropertyDescriptor(m,i)??c(h(m)):y,u=e+","+i,f=U[u]??(U[u]=((l=c(h(n)))==null?void 0:l.set)??0),E=f?f.bind(n):n.setAttribute.bind(n,i),s=h(d??0);s===O?S(()=>(E(d.val),n)):s===F&&(!i.startsWith("on")||d._isBindingFunc)?S(()=>(E(d()),n)):E(d)}return H(n,...o)},{get:(e,r)=>e.bind(y,r)}),K=(t,e)=>e?e!==t&&t.replaceWith(e):t.remove(),ae=()=>{let t=[...V].filter(e=>e._val!==e._oldVal);V=y;for(let e of new Set(t.flatMap(r=>r._bindings=C(r._bindings))))K(e._dom,S(e.f,e._dom)),e._dom=y;for(let e of t)e._oldVal=e._val},se=(t,e)=>K(t,S(e,t));const _={add:H,_:oe,tags:T(),tagsNS:T,state:M,val:ne,oldVal:re,derive:G,hydrate:se},{a:le}=_.tags;console.log("spa.js");const I=/(:[^\/]+)/g;function ie(t,e){const r=e.match(t.matcher);return r?t.params.reduce((a,o,n)=>(a[o]=decodeURIComponent(r[n+1]),a),{}):!1}function ce(t){return t.split("&").filter(e=>e.length).reduce((e,r)=>{const[a,o]=r.split("=");return e[decodeURIComponent(a)]=decodeURIComponent(o),e},{})}function de(t,e,r){const a=new RegExp(e.replace(I,"([^/]+)")+"$"),o=(e.match(I)||[]).map(n=>n.substring(1));return{name:t,path:e,handler:r,matcher:a,params:o}}const N=(t,e)=>{let r;return{route:t.find(o=>r=ie(o,e)),params:r}},D=t=>{const[e,r]=t.split("?");return{path:e,queryString:r}},j=(t,e)=>t.replace(new RegExp("^"+e),"");class ue{constructor(){this.routes=[],this.prefix=""}add(e,r,a){return this.routes.push(de(e,r,a)),this}setPrefix(e){return this.prefix=e,this}dispatch(e){console.log("Router.dispatching",e);const{path:r,queryString:a}=D(j(e,this.prefix));console.log(r,a);const o=ce(a||""),{route:n,params:l}=N(this.routes,r);return n?(n.handler({params:l,query:o}),n):!1}getRoute(e){const{path:r,queryString:a}=D(j(e,this.prefix)),o=N(this.routes,r);return o&&o.route}formatUrl(e,r={},a={}){const o=this.routes.find(i=>i.name===e);if(!o)return"";const n=Object.keys(a).map(i=>[i,a[i]]).map(([i,d])=>encodeURIComponent(i)+"="+encodeURIComponent(d)).join("&"),l=this.prefix+o.path.replace(I,function(i){return r[i.substring(1)]});return n.length?l+"?"+n:l}}function fe(t,e,r){const a=_.state(""),o=s=>_.derive(()=>a.val===s),n=new ue;e.forEach(s=>{n.add(s.name,s.path,function({params:m,query:P}){console.log("VanSpa.router.action to "+s.name),a.val=s.name,s.title&&(window.document.title=s.title),s.callable().then(g=>"default"in g?t.replaceChildren(g.default(m,P)()):t.replaceChildren(g(m,P))).catch(g=>console.error("error changing page",g))})});const l=typeof r>"u"?null:r,i=_.state(l),d=()=>i.val,c=s=>{s===null?i.val=r:i.val=s};window.onpopstate=s=>{console.log("VanSpa.popstate:",s.target.location.href),n.dispatch(s.target.location.href)},window.onload=s=>{console.log("window.onload",s.target.location.href,window.history.state),c(window.history.state),n.dispatch(s.target.location.href)};const u=s=>{console.log("VanSpa.navigate",s),history.pushState(d(),"",s),n.dispatch(s)},f=s=>{s.preventDefault(),console.log("VanSpa.handleNav",s.target.href),u(s.target.href)};function E(s,...m){const{target:P,name:g,params:z,query:X,...k}=s;return console.log("VanSpa.navLink",s),le({"aria-current":_.derive(()=>o(g).val?"page":""),href:n.formatUrl(g,z,X),target:P||"_self",role:"link",class:k.class||"router-link",onclick:f,...k},m)}return{routerElement:t,currentPage:a,router:n,navState:i,getNavState:d,setNavState:c,navigate:u,handleNav:f,isCurrentPage:o,navLink:E}}const{div:pe}=_.tags;console.log("context.js");const he=[{path:"/",name:"home",title:"VanJS Example | Home",callable:async()=>b(()=>import("./home-3757be65.js"),[])},{path:"/context",name:"context",title:"VanJS Example | Context",callable:async()=>b(()=>import("./context-1fbdc18d.js"),[])},{path:"/agreement",name:"agreement",title:"VanJS Example | Agreement",callable:async()=>b(()=>import("./agreement-bb1ab99b.js"),[])},{path:"/user/:userId",name:"user",title:"VanJS Example | User",callable:async()=>b(()=>import("./user-fe55b54a.js"),["assets/user-fe55b54a.js","assets/users-f25696aa.js"])},{path:"/users",name:"users",title:"VanJS Example | Users",callable:async()=>b(()=>import("./users-f25696aa.js"),[])},{path:".*",name:"notFound",title:"VanJS Example | Not Found",callable:async()=>b(()=>import("./notFound-85f3ccf8.js"),[])}],me={agreement:!1},ge=pe({id:"layout",class:"layout"}),Q=fe(ge,he,me),{navLink:x}=Q;console.log("navbar.js");const{div:_e,nav:ve,hr:ye}=_.tags,be=()=>(console.log("function Navbar"),()=>_e(ve({class:"nav"},x({name:"home",class:"navbar-link"},"Home"),x({name:"users",class:"navbar-link"},"Users"),x({name:"context",class:"navbar-link"},"Context"),x({name:"agreement",class:"navbar-link"},"Agreement")),ye())),{div:Se}=_.tags,{routerElement:Ee,router:Pe}=Q,we=be(),xe=()=>Se(we(),Ee);console.log(Pe.formatUrl("user",{userId:123},{activeTab:"profile"}));document.body.replaceChildren(xe());export{Q as c,_ as v};
